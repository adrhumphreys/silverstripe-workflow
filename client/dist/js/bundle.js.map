{"version":3,"sources":["webpack:///webpack/bootstrap b48e041d0396d3ccadea","webpack:///./client/src/boot/index.js","webpack:///./client/src/boot/registerComponents.js","webpack:///./client/src/bundles/bundle.js","webpack:///./client/src/components/WorkflowButton.jsx","webpack:///./client/src/components/WorkflowWidget.jsx","webpack:///./client/src/legacy/entwine/index.js","webpack:///external \"Injector\"","webpack:///external \"React\"","webpack:///external \"PropTypes\"","webpack:///external \"ReactDom\"","webpack:///external \"jQuery\""],"names":["window","document","addEventListener","Injector","component","registerMany","WorkflowWidget","WorkflowButton","require","sendSelectedStep","route","stepId","recordId","recordType","fetch","method","headers","body","JSON","stringify","then","res","json","data","error","alert","WorkflowStep","id","title","onClick","selectedId","WorkflowOptions","steps","createOnClick","renderedSteps","map","s","selectedStepId","PopoverField","setSelectedId","open","setOpen","toggleCallback","selectedSteps","filter","selectedStep","Array","isArray","length","popoverProps","buttonClassName","popoverTitle","buttonTooltip","placement","console","log","propTypes","PropTypes","oneOfType","node","func","isRequired","Component","props","actualProps","jQuery","entwine","$","onmatch","context","parse","attr","ReactDOM","render","onunmatch","unmountComponentAtNode"],"mappings":"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","file":"js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./client/src/bundles/bundle.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b48e041d0396d3ccadea","/* global window */\nimport registerComponents from 'boot/registerComponents';\n\nwindow.document.addEventListener('DOMContentLoaded', () => {\n  registerComponents();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/boot/index.js","import Injector from \"lib/Injector\";\nimport WorkflowWidget from \"../components/WorkflowWidget\";\nimport WorkflowButton from \"../components/WorkflowButton\";\n\nexport default () => {\n  Injector.component.registerMany({\n    WorkflowWidget: WorkflowWidget,\n    WorkflowButton: WorkflowButton,\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/boot/registerComponents.js","// Include any legacy Entwine wrappers\nrequire('legacy/entwine');\n// Include boot entrypoint\nrequire('boot');\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/bundles/bundle.js","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { inject } from \"lib/Injector\";\n\nconst sendSelectedStep = ({ route, stepId, recordId, recordType }) => {\n    fetch(route, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n            stepId,\n            recordId,\n            recordType,\n        }),\n    })\n        .then((res) => res.json())\n        .then((data) => {\n            if (data.error) {\n                alert(data.error);\n            }\n        });\n};\n\nconst WorkflowStep = ({ id, title, onClick, selectedId }) => (\n    <button type=\"button\" className=\"workflow__state\" onClick={onClick}>\n        {title}\n        {selectedId === id ? \"selected\" : \"not selected\"}\n    </button>\n);\n\nconst WorkflowOptions = ({ steps, selectedId, createOnClick }) => {\n    const renderedSteps = steps.map((s) => (\n        <WorkflowStep\n            key={s.id}\n            {...s}\n            onClick={createOnClick(s.id)}\n            selectedId={selectedId}\n        />\n    ));\n\n    return <div>{renderedSteps}</div>;\n};\n\nconst WorkflowButton = ({\n    recordId,\n    recordType,\n    selectedStepId,\n    steps,\n    PopoverField,\n    route,\n}) => {\n    const [selectedId, setSelectedId] = useState(selectedStepId);\n    const [open, setOpen] = useState(false);\n    const toggleCallback = () => setOpen(!open);\n\n    const selectedSteps = steps.filter((s) => s.id === selectedId);\n    const selectedStep =\n        Array.isArray(selectedSteps) && selectedSteps.length > 0\n            ? selectedSteps[0]\n            : null;\n    const title = selectedStep ? `${selectedStep.title}` : \"Workflow\";\n\n    const popoverProps = {\n        id: `workflow-widget-${recordType}-${recordId}`,\n        buttonClassName: \"font-icon-tree\",\n        title: title,\n        data: {\n            popoverTitle: \"Edit workflow state\",\n            buttonTooltip: \"Edit workflow state\",\n            placement: \"top\",\n        },\n    };\n\n    console.log(steps);\n    console.log(selectedId);\n    console.log(selectedStepId);\n\n    const createOnClick = (stepId) => () => {\n        setSelectedId(stepId);\n        sendSelectedStep({\n            route,\n            stepId,\n            recordId,\n            recordType,\n        });\n    };\n\n    return (\n        <div className=\"workflow-widget\">\n            <PopoverField {...popoverProps}>\n                <WorkflowOptions\n                    steps={steps}\n                    setSelectedId={setSelectedId}\n                    selectedId={selectedId}\n                    createOnClick={createOnClick}\n                />\n            </PopoverField>\n        </div>\n    );\n};\n\nWorkflowButton.propTypes = {\n    PopoverField: PropTypes.oneOfType([PropTypes.node, PropTypes.func])\n        .isRequired,\n};\n\nexport { WorkflowButton as Component };\n\nexport default inject([\"PopoverField\"])(WorkflowButton);\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/components/WorkflowButton.jsx","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { inject } from \"lib/Injector\";\n\n// Middle-ware for the widget since we need to deal with props\n// we don't care for\nconst WorkflowWidget = (props) => {\n    console.log(props);\n    const { actualProps, WorkflowButton } = props;\n    return <WorkflowButton {...actualProps} />;\n};\n\nexport { WorkflowWidget as Component };\n\nexport default inject([\"WorkflowButton\"])(WorkflowWidget);\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/components/WorkflowWidget.jsx","import jQuery from \"jquery\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { loadComponent } from \"lib/Injector\";\n\n/**\n * Uses entwine to inject the WorkflowWidget React component into the DOM, when used\n * outside of a React context e.g. in the CMS\n */\njQuery.entwine(\"ss\", ($) => {\n  $(\".js-injector-boot .workflow-widget\").entwine({\n    onmatch() {\n      const context = {};\n      const WorkflowWidget = loadComponent(\"WorkflowWidget\", context);\n      const props = JSON.parse(this.attr(\"data-state\"));\n\n      ReactDOM.render(<WorkflowWidget {...props} />, this[0]);\n    },\n\n    onunmatch() {\n      ReactDOM.unmountComponentAtNode(this[0]);\n    },\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/legacy/entwine/index.js","module.exports = Injector;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Injector\"\n// module id = 0\n// module chunks = 0","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 1\n// module chunks = 0","module.exports = PropTypes;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"PropTypes\"\n// module id = 2\n// module chunks = 0","module.exports = ReactDom;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDom\"\n// module id = 3\n// module chunks = 0","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}