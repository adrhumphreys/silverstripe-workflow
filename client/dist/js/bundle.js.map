{"version":3,"sources":["webpack:///webpack/bootstrap 58265b1517c0842123fe","webpack:///./client/src/boot/index.js","webpack:///./client/src/boot/registerComponents.js","webpack:///./client/src/bundles/bundle.js","webpack:///./client/src/components/WorkflowButton.jsx","webpack:///./client/src/components/WorkflowWidget.jsx","webpack:///./client/src/helper.js","webpack:///./client/src/legacy/entwine/index.js","webpack:///external \"Injector\"","webpack:///external \"React\"","webpack:///external \"PropTypes\"","webpack:///external \"ReactDom\"","webpack:///external \"jQuery\""],"names":["window","document","addEventListener","Injector","component","registerMany","WorkflowWidget","WorkflowButton","require","WorkflowStep","id","title","onClick","selectedId","WorkflowOptions","steps","createOnClick","renderedSteps","map","s","recordId","recordType","selectedStepId","PopoverField","route","setSelectedId","open","setOpen","toggleCallback","selectedSteps","filter","selectedStep","Array","isArray","length","popoverProps","buttonClassName","data","popoverTitle","buttonTooltip","placement","trigger","console","log","stepId","propTypes","PropTypes","oneOfType","node","func","isRequired","Component","props","actualProps","sendSelectedStep","fetch","method","headers","body","JSON","stringify","then","res","json","error","alert","jQuery","entwine","$","onmatch","context","parse","attr","ReactDOM","render","onunmatch","unmountComponentAtNode"],"mappings":"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","file":"js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./client/src/bundles/bundle.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 58265b1517c0842123fe","/* global window */\nimport registerComponents from 'boot/registerComponents';\n\nwindow.document.addEventListener('DOMContentLoaded', () => {\n  registerComponents();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/boot/index.js","import Injector from \"lib/Injector\";\nimport WorkflowWidget from \"../components/WorkflowWidget\";\nimport WorkflowButton from \"../components/WorkflowButton\";\n\nexport default () => {\n  Injector.component.registerMany({\n    WorkflowWidget: WorkflowWidget,\n    WorkflowButton: WorkflowButton,\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/boot/registerComponents.js","// Include any legacy Entwine wrappers\nrequire('legacy/entwine');\n// Include boot entrypoint\nrequire('boot');\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/bundles/bundle.js","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { inject } from \"lib/Injector\";\nimport { sendSelectedStep } from \"../helper\";\n\nconst WorkflowStep = ({ id, title, onClick, selectedId }) => (\n    <button type=\"button\" className=\"workflow__state\" onClick={onClick}>\n        {title}\n        {selectedId === id ? \"selected\" : \"not selected\"}\n    </button>\n);\n\nconst WorkflowOptions = ({ steps, selectedId, createOnClick }) => {\n    const renderedSteps = steps.map((s) => (\n        <WorkflowStep\n            key={s.id}\n            {...s}\n            onClick={createOnClick(s.id)}\n            selectedId={selectedId}\n        />\n    ));\n\n    return <div>{renderedSteps}</div>;\n};\n\nconst WorkflowButton = ({\n    recordId,\n    recordType,\n    selectedStepId,\n    steps,\n    PopoverField,\n    route,\n}) => {\n    const [selectedId, setSelectedId] = useState(selectedStepId);\n    const [open, setOpen] = useState(false);\n    const toggleCallback = () => setOpen(!open);\n\n    const selectedSteps = steps.filter((s) => s.id === selectedId);\n    const selectedStep =\n        Array.isArray(selectedSteps) && selectedSteps.length > 0\n            ? selectedSteps[0]\n            : null;\n    const title = selectedStep ? `${selectedStep.title}` : \"Workflow\";\n\n    const popoverProps = {\n        id: `workflow-widget-${recordType}-${recordId}`,\n        buttonClassName: \"font-icon-tree\",\n        title: title,\n        data: {\n            popoverTitle: \"Edit workflow state\",\n            buttonTooltip: \"Edit workflow state\",\n            placement: \"top\",\n            trigger: \"focus\",\n        },\n    };\n\n    console.log(steps);\n    console.log(selectedId);\n    console.log(selectedStepId);\n\n    const createOnClick = (stepId) => () => {\n        setSelectedId(stepId);\n        sendSelectedStep({\n            route,\n            stepId,\n            recordId,\n            recordType,\n        });\n    };\n\n    return (\n        <div className=\"workflow-widget\">\n            <PopoverField {...popoverProps}>\n                <WorkflowOptions\n                    steps={steps}\n                    setSelectedId={setSelectedId}\n                    selectedId={selectedId}\n                    createOnClick={createOnClick}\n                />\n            </PopoverField>\n        </div>\n    );\n};\n\nWorkflowButton.propTypes = {\n    PopoverField: PropTypes.oneOfType([PropTypes.node, PropTypes.func])\n        .isRequired,\n};\n\nexport { WorkflowButton as Component };\n\nexport default inject([\"PopoverField\"])(WorkflowButton);\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/components/WorkflowButton.jsx","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { inject } from \"lib/Injector\";\n\n// Middle-ware for the widget since we need to deal with props\n// we don't care for\nconst WorkflowWidget = (props) => {\n    console.log(props);\n    const { actualProps, WorkflowButton } = props;\n    return <WorkflowButton {...actualProps} />;\n};\n\nexport { WorkflowWidget as Component };\n\nexport default inject([\"WorkflowButton\"])(WorkflowWidget);\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/components/WorkflowWidget.jsx","export const sendSelectedStep = ({ route, stepId, recordId, recordType }) => {\n  fetch(route, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      stepId,\n      recordId,\n      recordType,\n    }),\n  })\n    .then((res) => res.json())\n    .then((data) => {\n      if (data.error) {\n        alert(data.error);\n      }\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/helper.js","import jQuery from \"jquery\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { loadComponent } from \"lib/Injector\";\n\n/**\n * Uses entwine to inject the WorkflowWidget React component into the DOM, when used\n * outside of a React context e.g. in the CMS\n */\njQuery.entwine(\"ss\", ($) => {\n  $(\".js-injector-boot .workflow-widget\").entwine({\n    onmatch() {\n      const context = {};\n      const WorkflowWidget = loadComponent(\"WorkflowWidget\", context);\n      const props = JSON.parse(this.attr(\"data-state\"));\n\n      ReactDOM.render(<WorkflowWidget {...props} />, this[0]);\n    },\n\n    onunmatch() {\n      ReactDOM.unmountComponentAtNode(this[0]);\n    },\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/legacy/entwine/index.js","module.exports = Injector;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Injector\"\n// module id = 0\n// module chunks = 0","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 1\n// module chunks = 0","module.exports = PropTypes;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"PropTypes\"\n// module id = 2\n// module chunks = 0","module.exports = ReactDom;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDom\"\n// module id = 3\n// module chunks = 0","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}